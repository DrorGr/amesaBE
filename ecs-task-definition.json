{
  "family": "amesa-backend-task",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "512",
  "memory": "1024",
  "executionRoleArn": "arn:aws:iam::129394705401:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::129394705401:role/ecsTaskRole",
  "containerDefinitions": [
    {
      "name": "amesa-backend",
      "image": "129394705401.dkr.ecr.eu-north-1.amazonaws.com/amesabe:latest",
            "portMappings": [
              {
                "containerPort": 8080,
                "protocol": "tcp"
              }
            ],
      "essential": true,
      "environment": [
        {
          "name": "ASPNETCORE_ENVIRONMENT",
          "value": "Production"
        },
        {
          "name": "ASPNETCORE_URLS",
          "value": "http://+:8080"
        },
        {
          "name": "DB_HOST",
          "value": "amesadbmain1.cruuae28ob7m.eu-north-1.rds.amazonaws.com"
        },
        {
          "name": "DB_NAME",
          "value": "amesa_lottery"
        },
        {
          "name": "DB_USER",
          "value": "dror"
        },
        {
          "name": "DB_PORT",
          "value": "5432"
        },
        {
          "name": "REDIS_CONNECTION_STRING",
          "value": "YOUR_ELASTICACHE_ENDPOINT:6379"
        },
        {
          "name": "JWT_ISSUER",
          "value": "AmesaLottery"
        },
        {
          "name": "JWT_AUDIENCE",
          "value": "AmesaLotteryUsers"
        },
        {
          "name": "FRONTEND_URL",
          "value": "https://amesa.com"
        },
        {
          "name": "FRONTEND_URL_WWW",
          "value": "https://www.amesa.com"
        },
        {
          "name": "API_URL",
          "value": "https://api.amesa.com"
        },
        {
          "name": "SMTP_SERVER",
          "value": "smtp.gmail.com"
        },
        {
          "name": "SMTP_PORT",
          "value": "587"
        },
        {
          "name": "FROM_EMAIL",
          "value": "noreply@amesa.com"
        },
        {
          "name": "FROM_NAME",
          "value": "Amesa Lottery"
        },
        {
          "name": "PAYPAL_ENVIRONMENT",
          "value": "production"
        },
        {
          "name": "FILE_STORAGE_PROVIDER",
          "value": "AWS"
        },
        {
          "name": "AWS_REGION",
          "value": "eu-north-1"
        },
        {
          "name": "AWS_S3_BUCKET",
          "value": "amesa-uploads"
        }
      ],
      "secrets": [
        {
          "name": "DB_PASSWORD",
                "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/db-password-CyrWOE"
        },
        {
          "name": "JWT_SECRET_KEY",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/jwt-secret-HGAxW1"
        },
        {
          "name": "SMTP_USERNAME",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/smtp-username-cmbv0l"
        },
        {
          "name": "SMTP_PASSWORD",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/smtp-password-b2Oyuv"
        },
        {
          "name": "STRIPE_PUBLISHABLE_KEY",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/stripe-publishable-key-tjSuwl"
        },
        {
          "name": "STRIPE_SECRET_KEY",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/stripe-secret-key-Twzty6"
        },
        {
          "name": "STRIPE_WEBHOOK_SECRET",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/stripe-webhook-secret-9TxIos"
        },
        {
          "name": "PAYPAL_CLIENT_ID",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/paypal-client-id-qjocxf"
        },
        {
          "name": "PAYPAL_CLIENT_SECRET",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/paypal-client-secret-eYfsPx"
        },
        {
          "name": "AWS_ACCESS_KEY_ID",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/aws-access-key-id-862suu"
        },
        {
          "name": "AWS_SECRET_ACCESS_KEY",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/aws-secret-access-key-0qtqXp"
        },
        {
          "name": "QR_CODE_SECRET_KEY",
          "valueFrom": "arn:aws:secretsmanager:eu-north-1:129394705401:secret:amesa/qr-code-secret-Ro9mz4"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/amesa-backend",
          "awslogs-region": "eu-north-1",
          "awslogs-stream-prefix": "ecs"
        }
      },
        "healthCheck": {
          "command": [
            "CMD-SHELL",
            "curl -f http://localhost:8080/health || exit 1"
          ],
          "interval": 30,
          "timeout": 5,
          "retries": 3,
          "startPeriod": 60
        }
    }
  ]
}

